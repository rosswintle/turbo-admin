(() => {
  var __create = Object.create;
  var __defProp = Object.defineProperty;
  var __getProtoOf = Object.getPrototypeOf;
  var __hasOwnProp = Object.prototype.hasOwnProperty;
  var __getOwnPropNames = Object.getOwnPropertyNames;
  var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
  var __markAsModule = (target) => __defProp(target, "__esModule", {value: true});
  var __commonJS = (cb, mod) => () => (mod || cb((mod = {exports: {}}).exports, mod), mod.exports);
  var __reExport = (target, module, desc) => {
    if (module && typeof module === "object" || typeof module === "function") {
      for (let key of __getOwnPropNames(module))
        if (!__hasOwnProp.call(target, key) && key !== "default")
          __defProp(target, key, {get: () => module[key], enumerable: !(desc = __getOwnPropDesc(module, key)) || desc.enumerable});
    }
    return target;
  };
  var __toModule = (module) => {
    return __reExport(__markAsModule(__defProp(module != null ? __create(__getProtoOf(module)) : {}, "default", module && module.__esModule && "default" in module ? {get: () => module.default, enumerable: true} : {value: module, enumerable: true})), module);
  };

  // src/fuse-6.4.6.js
  var require_fuse_6_4_6 = __commonJS((exports, module) => {
    var e;
    var t;
    e = exports, t = function() {
      "use strict";
      function e2(t3) {
        return (e2 = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(e3) {
          return typeof e3;
        } : function(e3) {
          return e3 && typeof Symbol == "function" && e3.constructor === Symbol && e3 !== Symbol.prototype ? "symbol" : typeof e3;
        })(t3);
      }
      function t2(e3, t3) {
        if (!(e3 instanceof t3))
          throw new TypeError("Cannot call a class as a function");
      }
      function n(e3, t3) {
        for (var n2 = 0; n2 < t3.length; n2++) {
          var r2 = t3[n2];
          r2.enumerable = r2.enumerable || false, r2.configurable = true, "value" in r2 && (r2.writable = true), Object.defineProperty(e3, r2.key, r2);
        }
      }
      function r(e3, t3, r2) {
        return t3 && n(e3.prototype, t3), r2 && n(e3, r2), e3;
      }
      function i(e3, t3, n2) {
        return t3 in e3 ? Object.defineProperty(e3, t3, {value: n2, enumerable: true, configurable: true, writable: true}) : e3[t3] = n2, e3;
      }
      function o(e3, t3) {
        var n2 = Object.keys(e3);
        if (Object.getOwnPropertySymbols) {
          var r2 = Object.getOwnPropertySymbols(e3);
          t3 && (r2 = r2.filter(function(t4) {
            return Object.getOwnPropertyDescriptor(e3, t4).enumerable;
          })), n2.push.apply(n2, r2);
        }
        return n2;
      }
      function c(e3) {
        for (var t3 = 1; t3 < arguments.length; t3++) {
          var n2 = arguments[t3] != null ? arguments[t3] : {};
          t3 % 2 ? o(Object(n2), true).forEach(function(t4) {
            i(e3, t4, n2[t4]);
          }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e3, Object.getOwnPropertyDescriptors(n2)) : o(Object(n2)).forEach(function(t4) {
            Object.defineProperty(e3, t4, Object.getOwnPropertyDescriptor(n2, t4));
          });
        }
        return e3;
      }
      function a(e3, t3) {
        if (typeof t3 != "function" && t3 !== null)
          throw new TypeError("Super expression must either be null or a function");
        e3.prototype = Object.create(t3 && t3.prototype, {constructor: {value: e3, writable: true, configurable: true}}), t3 && u(e3, t3);
      }
      function s(e3) {
        return (s = Object.setPrototypeOf ? Object.getPrototypeOf : function(e4) {
          return e4.__proto__ || Object.getPrototypeOf(e4);
        })(e3);
      }
      function u(e3, t3) {
        return (u = Object.setPrototypeOf || function(e4, t4) {
          return e4.__proto__ = t4, e4;
        })(e3, t3);
      }
      function h(e3, t3) {
        return !t3 || typeof t3 != "object" && typeof t3 != "function" ? function(e4) {
          if (e4 === void 0)
            throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
          return e4;
        }(e3) : t3;
      }
      function f(e3) {
        var t3 = function() {
          if (typeof Reflect == "undefined" || !Reflect.construct)
            return false;
          if (Reflect.construct.sham)
            return false;
          if (typeof Proxy == "function")
            return true;
          try {
            return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
            })), true;
          } catch (e4) {
            return false;
          }
        }();
        return function() {
          var n2, r2 = s(e3);
          if (t3) {
            var i2 = s(this).constructor;
            n2 = Reflect.construct(r2, arguments, i2);
          } else
            n2 = r2.apply(this, arguments);
          return h(this, n2);
        };
      }
      function l(e3) {
        return function(e4) {
          if (Array.isArray(e4))
            return d(e4);
        }(e3) || function(e4) {
          if (typeof Symbol != "undefined" && Symbol.iterator in Object(e4))
            return Array.from(e4);
        }(e3) || function(e4, t3) {
          if (e4) {
            if (typeof e4 == "string")
              return d(e4, t3);
            var n2 = Object.prototype.toString.call(e4).slice(8, -1);
            return n2 === "Object" && e4.constructor && (n2 = e4.constructor.name), n2 === "Map" || n2 === "Set" ? Array.from(e4) : n2 === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n2) ? d(e4, t3) : void 0;
          }
        }(e3) || function() {
          throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
        }();
      }
      function d(e3, t3) {
        (t3 == null || t3 > e3.length) && (t3 = e3.length);
        for (var n2 = 0, r2 = new Array(t3); n2 < t3; n2++)
          r2[n2] = e3[n2];
        return r2;
      }
      function v(e3) {
        return Array.isArray ? Array.isArray(e3) : b(e3) === "[object Array]";
      }
      function g(e3) {
        return typeof e3 == "string";
      }
      function y(e3) {
        return typeof e3 == "number";
      }
      function p(e3) {
        return e3 === true || e3 === false || function(e4) {
          return m(e4) && e4 !== null;
        }(e3) && b(e3) == "[object Boolean]";
      }
      function m(t3) {
        return e2(t3) === "object";
      }
      function k(e3) {
        return e3 != null;
      }
      function M(e3) {
        return !e3.trim().length;
      }
      function b(e3) {
        return e3 == null ? e3 === void 0 ? "[object Undefined]" : "[object Null]" : Object.prototype.toString.call(e3);
      }
      var x = function(e3) {
        return "Invalid value for key ".concat(e3);
      }, L = function(e3) {
        return "Pattern length exceeds max of ".concat(e3, ".");
      }, S = Object.prototype.hasOwnProperty, w = function() {
        function e3(n2) {
          var r2 = this;
          t2(this, e3), this._keys = [], this._keyMap = {};
          var i2 = 0;
          n2.forEach(function(e4) {
            var t3 = _(e4);
            i2 += t3.weight, r2._keys.push(t3), r2._keyMap[t3.id] = t3, i2 += t3.weight;
          }), this._keys.forEach(function(e4) {
            e4.weight /= i2;
          });
        }
        return r(e3, [{key: "get", value: function(e4) {
          return this._keyMap[e4];
        }}, {key: "keys", value: function() {
          return this._keys;
        }}, {key: "toJSON", value: function() {
          return JSON.stringify(this._keys);
        }}]), e3;
      }();
      function _(e3) {
        var t3 = null, n2 = null, r2 = null, i2 = 1;
        if (g(e3) || v(e3))
          r2 = e3, t3 = O(e3), n2 = j(e3);
        else {
          if (!S.call(e3, "name"))
            throw new Error(function(e4) {
              return "Missing ".concat(e4, " property in key");
            }("name"));
          var o2 = e3.name;
          if (r2 = o2, S.call(e3, "weight") && (i2 = e3.weight) <= 0)
            throw new Error(function(e4) {
              return "Property 'weight' in key '".concat(e4, "' must be a positive integer");
            }(o2));
          t3 = O(o2), n2 = j(o2);
        }
        return {path: t3, id: n2, weight: i2, src: r2};
      }
      function O(e3) {
        return v(e3) ? e3 : e3.split(".");
      }
      function j(e3) {
        return v(e3) ? e3.join(".") : e3;
      }
      var A = c({}, {isCaseSensitive: false, includeScore: false, keys: [], shouldSort: true, sortFn: function(e3, t3) {
        return e3.score === t3.score ? e3.idx < t3.idx ? -1 : 1 : e3.score < t3.score ? -1 : 1;
      }}, {}, {includeMatches: false, findAllMatches: false, minMatchCharLength: 1}, {}, {location: 0, threshold: 0.6, distance: 100}, {}, {useExtendedSearch: false, getFn: function(e3, t3) {
        var n2 = [], r2 = false;
        return function e4(t4, i2, o2) {
          if (k(t4))
            if (i2[o2]) {
              var c2 = t4[i2[o2]];
              if (!k(c2))
                return;
              if (o2 === i2.length - 1 && (g(c2) || y(c2) || p(c2)))
                n2.push(function(e5) {
                  return e5 == null ? "" : function(e6) {
                    if (typeof e6 == "string")
                      return e6;
                    var t5 = e6 + "";
                    return t5 == "0" && 1 / e6 == -1 / 0 ? "-0" : t5;
                  }(e5);
                }(c2));
              else if (v(c2)) {
                r2 = true;
                for (var a2 = 0, s2 = c2.length; a2 < s2; a2 += 1)
                  e4(c2[a2], i2, o2 + 1);
              } else
                i2.length && e4(c2, i2, o2 + 1);
            } else
              n2.push(t4);
        }(e3, g(t3) ? t3.split(".") : t3, 0), r2 ? n2 : n2[0];
      }, ignoreLocation: false, ignoreFieldNorm: false}), I = /[^ ]+/g;
      function C() {
        var e3 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 3, t3 = new Map(), n2 = Math.pow(10, e3);
        return {get: function(e4) {
          var r2 = e4.match(I).length;
          if (t3.has(r2))
            return t3.get(r2);
          var i2 = 1 / Math.sqrt(r2), o2 = parseFloat(Math.round(i2 * n2) / n2);
          return t3.set(r2, o2), o2;
        }, clear: function() {
          t3.clear();
        }};
      }
      var E = function() {
        function e3() {
          var n2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, r2 = n2.getFn, i2 = r2 === void 0 ? A.getFn : r2;
          t2(this, e3), this.norm = C(3), this.getFn = i2, this.isCreated = false, this.setIndexRecords();
        }
        return r(e3, [{key: "setSources", value: function() {
          var e4 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : [];
          this.docs = e4;
        }}, {key: "setIndexRecords", value: function() {
          var e4 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : [];
          this.records = e4;
        }}, {key: "setKeys", value: function() {
          var e4 = this, t3 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : [];
          this.keys = t3, this._keysMap = {}, t3.forEach(function(t4, n2) {
            e4._keysMap[t4.id] = n2;
          });
        }}, {key: "create", value: function() {
          var e4 = this;
          !this.isCreated && this.docs.length && (this.isCreated = true, g(this.docs[0]) ? this.docs.forEach(function(t3, n2) {
            e4._addString(t3, n2);
          }) : this.docs.forEach(function(t3, n2) {
            e4._addObject(t3, n2);
          }), this.norm.clear());
        }}, {key: "add", value: function(e4) {
          var t3 = this.size();
          g(e4) ? this._addString(e4, t3) : this._addObject(e4, t3);
        }}, {key: "removeAt", value: function(e4) {
          this.records.splice(e4, 1);
          for (var t3 = e4, n2 = this.size(); t3 < n2; t3 += 1)
            this.records[t3].i -= 1;
        }}, {key: "getValueForItemAtKeyId", value: function(e4, t3) {
          return e4[this._keysMap[t3]];
        }}, {key: "size", value: function() {
          return this.records.length;
        }}, {key: "_addString", value: function(e4, t3) {
          if (k(e4) && !M(e4)) {
            var n2 = {v: e4, i: t3, n: this.norm.get(e4)};
            this.records.push(n2);
          }
        }}, {key: "_addObject", value: function(e4, t3) {
          var n2 = this, r2 = {i: t3, $: {}};
          this.keys.forEach(function(t4, i2) {
            var o2 = n2.getFn(e4, t4.path);
            if (k(o2)) {
              if (v(o2))
                !function() {
                  for (var e5 = [], t5 = [{nestedArrIndex: -1, value: o2}]; t5.length; ) {
                    var c3 = t5.pop(), a2 = c3.nestedArrIndex, s2 = c3.value;
                    if (k(s2))
                      if (g(s2) && !M(s2)) {
                        var u2 = {v: s2, i: a2, n: n2.norm.get(s2)};
                        e5.push(u2);
                      } else
                        v(s2) && s2.forEach(function(e6, n3) {
                          t5.push({nestedArrIndex: n3, value: e6});
                        });
                  }
                  r2.$[i2] = e5;
                }();
              else if (!M(o2)) {
                var c2 = {v: o2, n: n2.norm.get(o2)};
                r2.$[i2] = c2;
              }
            }
          }), this.records.push(r2);
        }}, {key: "toJSON", value: function() {
          return {keys: this.keys, records: this.records};
        }}]), e3;
      }();
      function $(e3, t3) {
        var n2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {}, r2 = n2.getFn, i2 = r2 === void 0 ? A.getFn : r2, o2 = new E({getFn: i2});
        return o2.setKeys(e3.map(_)), o2.setSources(t3), o2.create(), o2;
      }
      function R(e3) {
        var t3 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}, n2 = t3.errors, r2 = n2 === void 0 ? 0 : n2, i2 = t3.currentLocation, o2 = i2 === void 0 ? 0 : i2, c2 = t3.expectedLocation, a2 = c2 === void 0 ? 0 : c2, s2 = t3.distance, u2 = s2 === void 0 ? A.distance : s2, h2 = t3.ignoreLocation, f2 = h2 === void 0 ? A.ignoreLocation : h2, l2 = r2 / e3.length;
        if (f2)
          return l2;
        var d2 = Math.abs(a2 - o2);
        return u2 ? l2 + d2 / u2 : d2 ? 1 : l2;
      }
      function F() {
        for (var e3 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : [], t3 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : A.minMatchCharLength, n2 = [], r2 = -1, i2 = -1, o2 = 0, c2 = e3.length; o2 < c2; o2 += 1) {
          var a2 = e3[o2];
          a2 && r2 === -1 ? r2 = o2 : a2 || r2 === -1 || ((i2 = o2 - 1) - r2 + 1 >= t3 && n2.push([r2, i2]), r2 = -1);
        }
        return e3[o2 - 1] && o2 - r2 >= t3 && n2.push([r2, o2 - 1]), n2;
      }
      function P(e3) {
        for (var t3 = {}, n2 = 0, r2 = e3.length; n2 < r2; n2 += 1) {
          var i2 = e3.charAt(n2);
          t3[i2] = (t3[i2] || 0) | 1 << r2 - n2 - 1;
        }
        return t3;
      }
      var N = function() {
        function e3(n2) {
          var r2 = this, i2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}, o2 = i2.location, c2 = o2 === void 0 ? A.location : o2, a2 = i2.threshold, s2 = a2 === void 0 ? A.threshold : a2, u2 = i2.distance, h2 = u2 === void 0 ? A.distance : u2, f2 = i2.includeMatches, l2 = f2 === void 0 ? A.includeMatches : f2, d2 = i2.findAllMatches, v2 = d2 === void 0 ? A.findAllMatches : d2, g2 = i2.minMatchCharLength, y2 = g2 === void 0 ? A.minMatchCharLength : g2, p2 = i2.isCaseSensitive, m2 = p2 === void 0 ? A.isCaseSensitive : p2, k2 = i2.ignoreLocation, M2 = k2 === void 0 ? A.ignoreLocation : k2;
          if (t2(this, e3), this.options = {location: c2, threshold: s2, distance: h2, includeMatches: l2, findAllMatches: v2, minMatchCharLength: y2, isCaseSensitive: m2, ignoreLocation: M2}, this.pattern = m2 ? n2 : n2.toLowerCase(), this.chunks = [], this.pattern.length) {
            var b2 = function(e4, t3) {
              r2.chunks.push({pattern: e4, alphabet: P(e4), startIndex: t3});
            }, x2 = this.pattern.length;
            if (x2 > 32) {
              for (var L2 = 0, S2 = x2 % 32, w2 = x2 - S2; L2 < w2; )
                b2(this.pattern.substr(L2, 32), L2), L2 += 32;
              if (S2) {
                var _2 = x2 - 32;
                b2(this.pattern.substr(_2), _2);
              }
            } else
              b2(this.pattern, 0);
          }
        }
        return r(e3, [{key: "searchIn", value: function(e4) {
          var t3 = this.options, n2 = t3.isCaseSensitive, r2 = t3.includeMatches;
          if (n2 || (e4 = e4.toLowerCase()), this.pattern === e4) {
            var i2 = {isMatch: true, score: 0};
            return r2 && (i2.indices = [[0, e4.length - 1]]), i2;
          }
          var o2 = this.options, c2 = o2.location, a2 = o2.distance, s2 = o2.threshold, u2 = o2.findAllMatches, h2 = o2.minMatchCharLength, f2 = o2.ignoreLocation, d2 = [], v2 = 0, g2 = false;
          this.chunks.forEach(function(t4) {
            var n3 = t4.pattern, i3 = t4.alphabet, o3 = t4.startIndex, y3 = function(e5, t5, n4) {
              var r3 = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : {}, i4 = r3.location, o4 = i4 === void 0 ? A.location : i4, c3 = r3.distance, a3 = c3 === void 0 ? A.distance : c3, s3 = r3.threshold, u3 = s3 === void 0 ? A.threshold : s3, h3 = r3.findAllMatches, f3 = h3 === void 0 ? A.findAllMatches : h3, l2 = r3.minMatchCharLength, d3 = l2 === void 0 ? A.minMatchCharLength : l2, v3 = r3.includeMatches, g3 = v3 === void 0 ? A.includeMatches : v3, y4 = r3.ignoreLocation, p3 = y4 === void 0 ? A.ignoreLocation : y4;
              if (t5.length > 32)
                throw new Error(L(32));
              for (var m3, k3 = t5.length, M2 = e5.length, b2 = Math.max(0, Math.min(o4, M2)), x2 = u3, S2 = b2, w2 = d3 > 1 || g3, _2 = w2 ? Array(M2) : []; (m3 = e5.indexOf(t5, S2)) > -1; ) {
                var O2 = R(t5, {currentLocation: m3, expectedLocation: b2, distance: a3, ignoreLocation: p3});
                if (x2 = Math.min(O2, x2), S2 = m3 + k3, w2)
                  for (var j2 = 0; j2 < k3; )
                    _2[m3 + j2] = 1, j2 += 1;
              }
              S2 = -1;
              for (var I2 = [], C2 = 1, E2 = k3 + M2, $2 = 1 << k3 - 1, P2 = 0; P2 < k3; P2 += 1) {
                for (var N2 = 0, D2 = E2; N2 < D2; ) {
                  var z2 = R(t5, {errors: P2, currentLocation: b2 + D2, expectedLocation: b2, distance: a3, ignoreLocation: p3});
                  z2 <= x2 ? N2 = D2 : E2 = D2, D2 = Math.floor((E2 - N2) / 2 + N2);
                }
                E2 = D2;
                var K2 = Math.max(1, b2 - D2 + 1), q2 = f3 ? M2 : Math.min(b2 + D2, M2) + k3, W2 = Array(q2 + 2);
                W2[q2 + 1] = (1 << P2) - 1;
                for (var J2 = q2; J2 >= K2; J2 -= 1) {
                  var T2 = J2 - 1, U2 = n4[e5.charAt(T2)];
                  if (w2 && (_2[T2] = +!!U2), W2[J2] = (W2[J2 + 1] << 1 | 1) & U2, P2 && (W2[J2] |= (I2[J2 + 1] | I2[J2]) << 1 | 1 | I2[J2 + 1]), W2[J2] & $2 && (C2 = R(t5, {errors: P2, currentLocation: T2, expectedLocation: b2, distance: a3, ignoreLocation: p3})) <= x2) {
                    if (x2 = C2, (S2 = T2) <= b2)
                      break;
                    K2 = Math.max(1, 2 * b2 - S2);
                  }
                }
                var V2 = R(t5, {errors: P2 + 1, currentLocation: b2, expectedLocation: b2, distance: a3, ignoreLocation: p3});
                if (V2 > x2)
                  break;
                I2 = W2;
              }
              var B2 = {isMatch: S2 >= 0, score: Math.max(1e-3, C2)};
              if (w2) {
                var G2 = F(_2, d3);
                G2.length ? g3 && (B2.indices = G2) : B2.isMatch = false;
              }
              return B2;
            }(e4, n3, i3, {location: c2 + o3, distance: a2, threshold: s2, findAllMatches: u2, minMatchCharLength: h2, includeMatches: r2, ignoreLocation: f2}), p2 = y3.isMatch, m2 = y3.score, k2 = y3.indices;
            p2 && (g2 = true), v2 += m2, p2 && k2 && (d2 = [].concat(l(d2), l(k2)));
          });
          var y2 = {isMatch: g2, score: g2 ? v2 / this.chunks.length : 1};
          return g2 && r2 && (y2.indices = d2), y2;
        }}]), e3;
      }(), D = function() {
        function e3(n2) {
          t2(this, e3), this.pattern = n2;
        }
        return r(e3, [{key: "search", value: function() {
        }}], [{key: "isMultiMatch", value: function(e4) {
          return z(e4, this.multiRegex);
        }}, {key: "isSingleMatch", value: function(e4) {
          return z(e4, this.singleRegex);
        }}]), e3;
      }();
      function z(e3, t3) {
        var n2 = e3.match(t3);
        return n2 ? n2[1] : null;
      }
      var K = function(e3) {
        a(i2, e3);
        var n2 = f(i2);
        function i2(e4) {
          return t2(this, i2), n2.call(this, e4);
        }
        return r(i2, [{key: "search", value: function(e4) {
          var t3 = e4 === this.pattern;
          return {isMatch: t3, score: t3 ? 0 : 1, indices: [0, this.pattern.length - 1]};
        }}], [{key: "type", get: function() {
          return "exact";
        }}, {key: "multiRegex", get: function() {
          return /^="(.*)"$/;
        }}, {key: "singleRegex", get: function() {
          return /^=(.*)$/;
        }}]), i2;
      }(D), q = function(e3) {
        a(i2, e3);
        var n2 = f(i2);
        function i2(e4) {
          return t2(this, i2), n2.call(this, e4);
        }
        return r(i2, [{key: "search", value: function(e4) {
          var t3 = e4.indexOf(this.pattern) === -1;
          return {isMatch: t3, score: t3 ? 0 : 1, indices: [0, e4.length - 1]};
        }}], [{key: "type", get: function() {
          return "inverse-exact";
        }}, {key: "multiRegex", get: function() {
          return /^!"(.*)"$/;
        }}, {key: "singleRegex", get: function() {
          return /^!(.*)$/;
        }}]), i2;
      }(D), W = function(e3) {
        a(i2, e3);
        var n2 = f(i2);
        function i2(e4) {
          return t2(this, i2), n2.call(this, e4);
        }
        return r(i2, [{key: "search", value: function(e4) {
          var t3 = e4.startsWith(this.pattern);
          return {isMatch: t3, score: t3 ? 0 : 1, indices: [0, this.pattern.length - 1]};
        }}], [{key: "type", get: function() {
          return "prefix-exact";
        }}, {key: "multiRegex", get: function() {
          return /^\^"(.*)"$/;
        }}, {key: "singleRegex", get: function() {
          return /^\^(.*)$/;
        }}]), i2;
      }(D), J = function(e3) {
        a(i2, e3);
        var n2 = f(i2);
        function i2(e4) {
          return t2(this, i2), n2.call(this, e4);
        }
        return r(i2, [{key: "search", value: function(e4) {
          var t3 = !e4.startsWith(this.pattern);
          return {isMatch: t3, score: t3 ? 0 : 1, indices: [0, e4.length - 1]};
        }}], [{key: "type", get: function() {
          return "inverse-prefix-exact";
        }}, {key: "multiRegex", get: function() {
          return /^!\^"(.*)"$/;
        }}, {key: "singleRegex", get: function() {
          return /^!\^(.*)$/;
        }}]), i2;
      }(D), T = function(e3) {
        a(i2, e3);
        var n2 = f(i2);
        function i2(e4) {
          return t2(this, i2), n2.call(this, e4);
        }
        return r(i2, [{key: "search", value: function(e4) {
          var t3 = e4.endsWith(this.pattern);
          return {isMatch: t3, score: t3 ? 0 : 1, indices: [e4.length - this.pattern.length, e4.length - 1]};
        }}], [{key: "type", get: function() {
          return "suffix-exact";
        }}, {key: "multiRegex", get: function() {
          return /^"(.*)"\$$/;
        }}, {key: "singleRegex", get: function() {
          return /^(.*)\$$/;
        }}]), i2;
      }(D), U = function(e3) {
        a(i2, e3);
        var n2 = f(i2);
        function i2(e4) {
          return t2(this, i2), n2.call(this, e4);
        }
        return r(i2, [{key: "search", value: function(e4) {
          var t3 = !e4.endsWith(this.pattern);
          return {isMatch: t3, score: t3 ? 0 : 1, indices: [0, e4.length - 1]};
        }}], [{key: "type", get: function() {
          return "inverse-suffix-exact";
        }}, {key: "multiRegex", get: function() {
          return /^!"(.*)"\$$/;
        }}, {key: "singleRegex", get: function() {
          return /^!(.*)\$$/;
        }}]), i2;
      }(D), V = function(e3) {
        a(i2, e3);
        var n2 = f(i2);
        function i2(e4) {
          var r2, o2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}, c2 = o2.location, a2 = c2 === void 0 ? A.location : c2, s2 = o2.threshold, u2 = s2 === void 0 ? A.threshold : s2, h2 = o2.distance, f2 = h2 === void 0 ? A.distance : h2, l2 = o2.includeMatches, d2 = l2 === void 0 ? A.includeMatches : l2, v2 = o2.findAllMatches, g2 = v2 === void 0 ? A.findAllMatches : v2, y2 = o2.minMatchCharLength, p2 = y2 === void 0 ? A.minMatchCharLength : y2, m2 = o2.isCaseSensitive, k2 = m2 === void 0 ? A.isCaseSensitive : m2, M2 = o2.ignoreLocation, b2 = M2 === void 0 ? A.ignoreLocation : M2;
          return t2(this, i2), (r2 = n2.call(this, e4))._bitapSearch = new N(e4, {location: a2, threshold: u2, distance: f2, includeMatches: d2, findAllMatches: g2, minMatchCharLength: p2, isCaseSensitive: k2, ignoreLocation: b2}), r2;
        }
        return r(i2, [{key: "search", value: function(e4) {
          return this._bitapSearch.searchIn(e4);
        }}], [{key: "type", get: function() {
          return "fuzzy";
        }}, {key: "multiRegex", get: function() {
          return /^"(.*)"$/;
        }}, {key: "singleRegex", get: function() {
          return /^(.*)$/;
        }}]), i2;
      }(D), B = function(e3) {
        a(i2, e3);
        var n2 = f(i2);
        function i2(e4) {
          return t2(this, i2), n2.call(this, e4);
        }
        return r(i2, [{key: "search", value: function(e4) {
          for (var t3, n3 = 0, r2 = [], i3 = this.pattern.length; (t3 = e4.indexOf(this.pattern, n3)) > -1; )
            n3 = t3 + i3, r2.push([t3, n3 - 1]);
          var o2 = !!r2.length;
          return {isMatch: o2, score: o2 ? 0 : 1, indices: r2};
        }}], [{key: "type", get: function() {
          return "include";
        }}, {key: "multiRegex", get: function() {
          return /^'"(.*)"$/;
        }}, {key: "singleRegex", get: function() {
          return /^'(.*)$/;
        }}]), i2;
      }(D), G = [K, B, W, J, U, T, q, V], H = G.length, Q = / +(?=([^\"]*\"[^\"]*\")*[^\"]*$)/;
      function X(e3) {
        var t3 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
        return e3.split("|").map(function(e4) {
          for (var n2 = e4.trim().split(Q).filter(function(e5) {
            return e5 && !!e5.trim();
          }), r2 = [], i2 = 0, o2 = n2.length; i2 < o2; i2 += 1) {
            for (var c2 = n2[i2], a2 = false, s2 = -1; !a2 && ++s2 < H; ) {
              var u2 = G[s2], h2 = u2.isMultiMatch(c2);
              h2 && (r2.push(new u2(h2, t3)), a2 = true);
            }
            if (!a2)
              for (s2 = -1; ++s2 < H; ) {
                var f2 = G[s2], l2 = f2.isSingleMatch(c2);
                if (l2) {
                  r2.push(new f2(l2, t3));
                  break;
                }
              }
          }
          return r2;
        });
      }
      var Y = new Set([V.type, B.type]), Z = function() {
        function e3(n2) {
          var r2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}, i2 = r2.isCaseSensitive, o2 = i2 === void 0 ? A.isCaseSensitive : i2, c2 = r2.includeMatches, a2 = c2 === void 0 ? A.includeMatches : c2, s2 = r2.minMatchCharLength, u2 = s2 === void 0 ? A.minMatchCharLength : s2, h2 = r2.ignoreLocation, f2 = h2 === void 0 ? A.ignoreLocation : h2, l2 = r2.findAllMatches, d2 = l2 === void 0 ? A.findAllMatches : l2, v2 = r2.location, g2 = v2 === void 0 ? A.location : v2, y2 = r2.threshold, p2 = y2 === void 0 ? A.threshold : y2, m2 = r2.distance, k2 = m2 === void 0 ? A.distance : m2;
          t2(this, e3), this.query = null, this.options = {isCaseSensitive: o2, includeMatches: a2, minMatchCharLength: u2, findAllMatches: d2, ignoreLocation: f2, location: g2, threshold: p2, distance: k2}, this.pattern = o2 ? n2 : n2.toLowerCase(), this.query = X(this.pattern, this.options);
        }
        return r(e3, [{key: "searchIn", value: function(e4) {
          var t3 = this.query;
          if (!t3)
            return {isMatch: false, score: 1};
          var n2 = this.options, r2 = n2.includeMatches;
          e4 = n2.isCaseSensitive ? e4 : e4.toLowerCase();
          for (var i2 = 0, o2 = [], c2 = 0, a2 = 0, s2 = t3.length; a2 < s2; a2 += 1) {
            var u2 = t3[a2];
            o2.length = 0, i2 = 0;
            for (var h2 = 0, f2 = u2.length; h2 < f2; h2 += 1) {
              var d2 = u2[h2], v2 = d2.search(e4), g2 = v2.isMatch, y2 = v2.indices, p2 = v2.score;
              if (!g2) {
                c2 = 0, i2 = 0, o2.length = 0;
                break;
              }
              if (i2 += 1, c2 += p2, r2) {
                var m2 = d2.constructor.type;
                Y.has(m2) ? o2 = [].concat(l(o2), l(y2)) : o2.push(y2);
              }
            }
            if (i2) {
              var k2 = {isMatch: true, score: c2 / i2};
              return r2 && (k2.indices = o2), k2;
            }
          }
          return {isMatch: false, score: 1};
        }}], [{key: "condition", value: function(e4, t3) {
          return t3.useExtendedSearch;
        }}]), e3;
      }(), ee = [];
      function te(e3, t3) {
        for (var n2 = 0, r2 = ee.length; n2 < r2; n2 += 1) {
          var i2 = ee[n2];
          if (i2.condition(e3, t3))
            return new i2(e3, t3);
        }
        return new N(e3, t3);
      }
      var ne = "$and", re = "$or", ie = "$path", oe = "$val", ce = function(e3) {
        return !(!e3[ne] && !e3[re]);
      }, ae = function(e3) {
        return !!e3[ie];
      }, se = function(e3) {
        return !v(e3) && m(e3) && !ce(e3);
      }, ue = function(e3) {
        return i({}, ne, Object.keys(e3).map(function(t3) {
          return i({}, t3, e3[t3]);
        }));
      };
      function he(e3, t3) {
        var n2 = t3.ignoreFieldNorm, r2 = n2 === void 0 ? A.ignoreFieldNorm : n2;
        e3.forEach(function(e4) {
          var t4 = 1;
          e4.matches.forEach(function(e5) {
            var n3 = e5.key, i2 = e5.norm, o2 = e5.score, c2 = n3 ? n3.weight : null;
            t4 *= Math.pow(o2 === 0 && c2 ? Number.EPSILON : o2, (c2 || 1) * (r2 ? 1 : i2));
          }), e4.score = t4;
        });
      }
      function fe(e3, t3) {
        var n2 = e3.matches;
        t3.matches = [], k(n2) && n2.forEach(function(e4) {
          if (k(e4.indices) && e4.indices.length) {
            var n3 = {indices: e4.indices, value: e4.value};
            e4.key && (n3.key = e4.key.src), e4.idx > -1 && (n3.refIndex = e4.idx), t3.matches.push(n3);
          }
        });
      }
      function le(e3, t3) {
        t3.score = e3.score;
      }
      function de(e3, t3) {
        var n2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {}, r2 = n2.includeMatches, i2 = r2 === void 0 ? A.includeMatches : r2, o2 = n2.includeScore, c2 = o2 === void 0 ? A.includeScore : o2, a2 = [];
        return i2 && a2.push(fe), c2 && a2.push(le), e3.map(function(e4) {
          var n3 = e4.idx, r3 = {item: t3[n3], refIndex: n3};
          return a2.length && a2.forEach(function(t4) {
            t4(e4, r3);
          }), r3;
        });
      }
      var ve = function() {
        function e3(n2) {
          var r2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}, i2 = arguments.length > 2 ? arguments[2] : void 0;
          t2(this, e3), this.options = c({}, A, {}, r2), this.options.useExtendedSearch, this._keyStore = new w(this.options.keys), this.setCollection(n2, i2);
        }
        return r(e3, [{key: "setCollection", value: function(e4, t3) {
          if (this._docs = e4, t3 && !(t3 instanceof E))
            throw new Error("Incorrect 'index' type");
          this._myIndex = t3 || $(this.options.keys, this._docs, {getFn: this.options.getFn});
        }}, {key: "add", value: function(e4) {
          k(e4) && (this._docs.push(e4), this._myIndex.add(e4));
        }}, {key: "remove", value: function() {
          for (var e4 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : function() {
            return false;
          }, t3 = [], n2 = 0, r2 = this._docs.length; n2 < r2; n2 += 1) {
            var i2 = this._docs[n2];
            e4(i2, n2) && (this.removeAt(n2), n2 -= 1, r2 -= 1, t3.push(i2));
          }
          return t3;
        }}, {key: "removeAt", value: function(e4) {
          this._docs.splice(e4, 1), this._myIndex.removeAt(e4);
        }}, {key: "getIndex", value: function() {
          return this._myIndex;
        }}, {key: "search", value: function(e4) {
          var t3 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}, n2 = t3.limit, r2 = n2 === void 0 ? -1 : n2, i2 = this.options, o2 = i2.includeMatches, c2 = i2.includeScore, a2 = i2.shouldSort, s2 = i2.sortFn, u2 = i2.ignoreFieldNorm, h2 = g(e4) ? g(this._docs[0]) ? this._searchStringList(e4) : this._searchObjectList(e4) : this._searchLogical(e4);
          return he(h2, {ignoreFieldNorm: u2}), a2 && h2.sort(s2), y(r2) && r2 > -1 && (h2 = h2.slice(0, r2)), de(h2, this._docs, {includeMatches: o2, includeScore: c2});
        }}, {key: "_searchStringList", value: function(e4) {
          var t3 = te(e4, this.options), n2 = this._myIndex.records, r2 = [];
          return n2.forEach(function(e5) {
            var n3 = e5.v, i2 = e5.i, o2 = e5.n;
            if (k(n3)) {
              var c2 = t3.searchIn(n3), a2 = c2.isMatch, s2 = c2.score, u2 = c2.indices;
              a2 && r2.push({item: n3, idx: i2, matches: [{score: s2, value: n3, norm: o2, indices: u2}]});
            }
          }), r2;
        }}, {key: "_searchLogical", value: function(e4) {
          var t3 = this, n2 = function(e5, t4) {
            var n3 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {}, r3 = n3.auto, i3 = r3 === void 0 || r3, o3 = function e6(n4) {
              var r4 = Object.keys(n4), o4 = ae(n4);
              if (!o4 && r4.length > 1 && !ce(n4))
                return e6(ue(n4));
              if (se(n4)) {
                var c2 = o4 ? n4[ie] : r4[0], a2 = o4 ? n4[oe] : n4[c2];
                if (!g(a2))
                  throw new Error(x(c2));
                var s2 = {keyId: j(c2), pattern: a2};
                return i3 && (s2.searcher = te(a2, t4)), s2;
              }
              var u2 = {children: [], operator: r4[0]};
              return r4.forEach(function(t5) {
                var r5 = n4[t5];
                v(r5) && r5.forEach(function(t6) {
                  u2.children.push(e6(t6));
                });
              }), u2;
            };
            return ce(e5) || (e5 = ue(e5)), o3(e5);
          }(e4, this.options), r2 = this._myIndex.records, i2 = {}, o2 = [];
          return r2.forEach(function(e5) {
            var r3 = e5.$, c2 = e5.i;
            if (k(r3)) {
              var a2 = function e6(n3, r4, i3) {
                if (!n3.children) {
                  var o3 = n3.keyId, c3 = n3.searcher, a3 = t3._findMatches({key: t3._keyStore.get(o3), value: t3._myIndex.getValueForItemAtKeyId(r4, o3), searcher: c3});
                  return a3 && a3.length ? [{idx: i3, item: r4, matches: a3}] : [];
                }
                switch (n3.operator) {
                  case ne:
                    for (var s2 = [], u2 = 0, h2 = n3.children.length; u2 < h2; u2 += 1) {
                      var f2 = e6(n3.children[u2], r4, i3);
                      if (!f2.length)
                        return [];
                      s2.push.apply(s2, l(f2));
                    }
                    return s2;
                  case re:
                    for (var d2 = [], v2 = 0, g2 = n3.children.length; v2 < g2; v2 += 1) {
                      var y2 = e6(n3.children[v2], r4, i3);
                      if (y2.length) {
                        d2.push.apply(d2, l(y2));
                        break;
                      }
                    }
                    return d2;
                }
              }(n2, r3, c2);
              a2.length && (i2[c2] || (i2[c2] = {idx: c2, item: r3, matches: []}, o2.push(i2[c2])), a2.forEach(function(e6) {
                var t4, n3 = e6.matches;
                (t4 = i2[c2].matches).push.apply(t4, l(n3));
              }));
            }
          }), o2;
        }}, {key: "_searchObjectList", value: function(e4) {
          var t3 = this, n2 = te(e4, this.options), r2 = this._myIndex, i2 = r2.keys, o2 = r2.records, c2 = [];
          return o2.forEach(function(e5) {
            var r3 = e5.$, o3 = e5.i;
            if (k(r3)) {
              var a2 = [];
              i2.forEach(function(e6, i3) {
                a2.push.apply(a2, l(t3._findMatches({key: e6, value: r3[i3], searcher: n2})));
              }), a2.length && c2.push({idx: o3, item: r3, matches: a2});
            }
          }), c2;
        }}, {key: "_findMatches", value: function(e4) {
          var t3 = e4.key, n2 = e4.value, r2 = e4.searcher;
          if (!k(n2))
            return [];
          var i2 = [];
          if (v(n2))
            n2.forEach(function(e5) {
              var n3 = e5.v, o3 = e5.i, c3 = e5.n;
              if (k(n3)) {
                var a3 = r2.searchIn(n3), s3 = a3.isMatch, u3 = a3.score, h3 = a3.indices;
                s3 && i2.push({score: u3, key: t3, value: n3, idx: o3, norm: c3, indices: h3});
              }
            });
          else {
            var o2 = n2.v, c2 = n2.n, a2 = r2.searchIn(o2), s2 = a2.isMatch, u2 = a2.score, h2 = a2.indices;
            s2 && i2.push({score: u2, key: t3, value: o2, norm: c2, indices: h2});
          }
          return i2;
        }}]), e3;
      }();
      return ve.version = "6.4.6", ve.createIndex = $, ve.parseIndex = function(e3) {
        var t3 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}, n2 = t3.getFn, r2 = n2 === void 0 ? A.getFn : n2, i2 = e3.keys, o2 = e3.records, c2 = new E({getFn: r2});
        return c2.setKeys(i2), c2.setIndexRecords(o2), c2;
      }, ve.config = A, function() {
        ee.push.apply(ee, arguments);
      }(Z), ve;
    }, typeof exports == "object" && typeof module != "undefined" ? module.exports = t() : typeof define == "function" && define.amd ? define(t) : (e = e || self).Fuse = t();
  });

  // src/class-turbo-admin-palette.js
  var import_fuse_6_4_6 = __toModule(require_fuse_6_4_6());

  // src/class-turbo-admin-menu-item.js
  var TurboAdminMenuItem = class {
    constructor(title, action, parentTitle, noCache = false) {
      this.title = title;
      this.action = action;
      this.parentTitle = parentTitle;
      this.noCache = noCache;
    }
    sameAs(item) {
      return item.title === this.title && item.action === this.action && item.parentTitle === this.parentTitle;
    }
  };
  var class_turbo_admin_menu_item_default = TurboAdminMenuItem;

  // src/class-storage.js
  var Storage = class {
    constructor() {
      if (typeof browser === "undefined") {
        this.store = window.localStorage;
      } else {
        this.store = browser.storage.local;
      }
    }
    async set(dataObject) {
      if (typeof browser === "undefined") {
        const keys = Object.keys(dataObject);
        keys.forEach((key) => this.store.setItem(key, dataObject[key]));
      } else {
        await this.store.set(objectToSave);
      }
    }
    async get(key) {
      if (typeof browser === "undefined") {
        let returnObj = {};
        returnObj[key] = this.store.getItem(key);
        return returnObj;
      } else {
        return await this.store.get(key);
      }
    }
  };
  var class_storage_default = Storage;

  // src/class-content-api.js
  var ContentApi = class {
    constructor() {
      this.active = false;
      this.store = new class_storage_default();
    }
    async discoverApiRoot() {
      let wpApiSettings = null;
      this.storageKey = "wpApiSettings." + globalThis.taWp.home;
      const wpApiSettingsScript = document.getElementById("wp-api-request-js-extra");
      if (wpApiSettingsScript) {
        const wpApiSettingsString = wpApiSettingsScript.innerHTML.match(/var\s+wpApiSettings\s+=\s+(.+);/)[1];
        const wpApiSettings2 = JSON.parse(wpApiSettingsString);
        const objectToSave2 = {};
        objectToSave2[this.storageKey] = wpApiSettings2;
        await this.store.set(objectToSave2);
        this.apiRoot = wpApiSettings2.root;
        this.apiBase = this.apiRoot + wpApiSettings2.versionString;
        this.apiNonce = wpApiSettings2.nonce;
        this.maybeExpireNonce(wpApiSettings2);
        this.active = true;
        return;
      }
      wpApiSettings = await this.store.get(this.storageKey);
      if (wpApiSettings && Object.keys(wpApiSettings).length !== 0 && wpApiSettings[this.storageKey] && typeof wpApiSettings[this.storageKey] === "object") {
        wpApiSettings = wpApiSettings[this.storageKey];
        this.apiRoot = wpApiSettings.root;
        this.apiBase = this.apiRoot + wpApiSettings.versionString;
        this.apiNonce = wpApiSettings.nonce;
        this.maybeExpireNonce(wpApiSettings);
        this.active = true;
        return;
      }
      if (globalThis.taWp.apiLinkUrl) {
        this.apiRoot = globalThis.taWp.apiLinkUrl;
        this.apiBase = this.apiRoot + "wp/v2/";
        this.active = true;
        return;
      }
    }
    userLoggedIn() {
      return document.body.classList.contains("logged-in") || document.body.classList.contains("wp-admin");
    }
    async maybeExpireNonce(wpApiSettings) {
      if (wpApiSettings?.nonce && !this.userLoggedIn()) {
        this.apiNonce = null;
        wpApiSettings.nonce = null;
        const objectToSave2 = {};
        objectToSave2[this.storageKey] = wpApiSettings;
        await this.store.set(objectToSave2);
      }
    }
    makeParamString(data) {
      const params = new URLSearchParams();
      Object.keys(data).forEach((paramKey) => {
        params.append(paramKey, data[paramKey]);
      });
      return params.toString();
    }
    async get(path, data = {}) {
      const init = {
        method: "GET",
        headers: {},
        mode: "cors",
        cache: "no-store"
      };
      if (this.apiNonce) {
        data._wpnonce = this.apiNonce;
      }
      const params = this.makeParamString(data);
      const response = await fetch(`${this.apiBase}${path}/?${params}`);
      return response;
    }
  };
  var class_content_api_default = ContentApi;

  // src/class-turbo-admin-palette.js
  var TurboAdminPalette = class {
    constructor(paletteData, options) {
      console.log("Initialising TurboAdmin");
      this.options = options;
      this.paletteElement = document.getElementById("ta-command-palette-container");
      this.paletteInnerElement = document.getElementById("ta-command-palette");
      this.paletteInputElement = document.getElementById("ta-command-palette-input");
      this.paletteItemsElement = document.getElementById("ta-command-palette-items");
      this.paletteData = paletteData;
      this.postTypes = [];
      this.fetchPostTypes();
      this.contentItems = [];
      this.paletteItems = this.buildPaletteItems();
      this.selectedItem = this.paletteItems[0];
      this.openedSubMenu = null;
      this.selectedSubItem = null;
      this.updatePaletteItems();
      this.navigating = false;
      this.debouncedUpdateFn = null;
      this.paletteFuseOptions = [];
      this.paletteFuse = null;
      if (typeof import_fuse_6_4_6.default !== "function") {
        return;
      }
      this.paletteFuseOptions = {
        keys: ["innerText"]
      };
      this.paletteFuse = new import_fuse_6_4_6.default(this.paletteItems, this.paletteFuseOptions);
      document.addEventListener("keydown", (e) => this.handleGlobalKey(e));
      this.paletteInputElement.addEventListener("keydown", (e) => {
        this.paletteActions(e);
      });
      this.paletteElement.addEventListener("click", (e) => {
        this.checkForPaletteItemClick(e);
        this.checkForClickToClose(e);
      });
      this.paletteItemsElement.addEventListener("mouseover", (e) => {
        this.setHoveredItem(e.target);
      });
    }
    htmlDecode(input) {
      var doc = new DOMParser().parseFromString(input, "text/html");
      return doc.documentElement.textContent;
    }
    isMac() {
      return navigator.platform.startsWith("Mac");
    }
    metaPressed(e) {
      return this.isMac() ? e.metaKey : e.ctrlKey;
    }
    fetchPostTypes() {
      if (!globalThis.contentApi.active) {
        this.postTypes = [];
        return;
      }
      globalThis.contentApi.get("types").then((response) => {
        response.json().then((types) => {
          this.postTypes = types;
        });
      });
    }
    buildPaletteItems() {
      const paletteItems = [];
      this.paletteData.forEach((item) => {
        const li = document.createElement("li");
        const a = document.createElement("a");
        li.appendChild(a);
        a.href = item.action;
        let title = item.title;
        if (item.parentTitle) {
          title = item.parentTitle + ": " + title;
        }
        a.innerHTML = title;
        paletteItems.push(li);
      });
      const profileLinkElem = document.getElementById("wp-admin-bar-edit-profile");
      let profileLink = null;
      if (profileLinkElem) {
        profileLink = profileLinkElem.querySelector("a").href;
      }
      if (this.contentItems && this.contentItems.length > 0) {
        this.contentItems.forEach((item) => {
          const type = this.postTypes[item.subtype] ? this.postTypes[item.subtype].name : item.subtype;
          const title = `${item.title} (${type})`;
          const li = document.createElement("li");
          const a = document.createElement("a");
          const subMenu = document.createElement("div");
          const subMenuTitle = document.createElement("div");
          const subMenuItems = document.createElement("ul");
          subMenu.classList.add("ta-submenu");
          subMenuTitle.classList.add("ta-submenu-title");
          subMenuTitle.textContent = this.htmlDecode(title);
          subMenuItems.classList.add("ta-submenu-items");
          subMenu.appendChild(subMenuTitle);
          subMenu.appendChild(subMenuItems);
          const subMenuItem1 = document.createElement("li");
          const subMenuLink1 = document.createElement("a");
          subMenuLink1.innerText = "View";
          subMenuLink1.href = item.url;
          subMenuItem1.appendChild(subMenuLink1);
          subMenuItems.appendChild(subMenuItem1);
          if (profileLink) {
            const editLink = profileLink.replace("profile.php", `post.php?post=${item.id}&action=edit`);
            const subMenuItem2 = document.createElement("li");
            const subMenuLink2 = document.createElement("a");
            subMenuLink2.innerText = "Edit";
            subMenuLink2.href = editLink;
            subMenuItem2.appendChild(subMenuLink2);
            subMenuItems.appendChild(subMenuItem2);
          }
          const subMenuItem3 = document.createElement("li");
          const subMenuLink3 = document.createElement("a");
          subMenuLink3.innerText = "Copy link";
          subMenuLink3.href = item.url;
          subMenuLink3.setAttribute("data-action", "clipboard");
          subMenuItem3.appendChild(subMenuLink3);
          subMenuItems.appendChild(subMenuItem3);
          li.classList.add("ta-has-child-menu");
          li.appendChild(a);
          li.appendChild(subMenu);
          a.href = item.url;
          a.innerHTML = title;
          paletteItems.push(li);
        });
      }
      return paletteItems;
    }
    handleGlobalKey(e) {
      if (this.shortcutKeysPressed(e)) {
        if (this.paletteShown()) {
          this.hidePalette();
        } else {
          this.showPalette();
        }
      }
      if (e.code === "Escape" && this.paletteShown()) {
        if (this.isSubMenuOpen()) {
          this.closeSubMenu();
        } else {
          this.hidePalette();
        }
      }
      if ((e.code === "ArrowUp" || e.code === "ArrowDown" || e.code === "Enter") && this.paletteShown()) {
        e.preventDefault();
      }
    }
    shortcutKeysPressed(keyEvent) {
      const keysPressed = this.options.shortcutKeys.reduce((keyPressed, combo) => {
        if (keyPressed) {
          return keyPressed;
        }
        return (!navigator.platform.startsWith("Mac") || combo.meta === keyEvent.metaKey) && combo.alt === keyEvent.altKey && combo.shift === keyEvent.shiftKey && combo.ctrl === keyEvent.ctrlKey && keyEvent.code === "Key" + combo.key.toUpperCase();
      }, false);
      return keysPressed;
    }
    debouncedPaletteSearchAndUpdate() {
      if (this.debouncedUpdateFn === null) {
        this.debouncedUpdateFn = this.debounce(this.paletteSearchAndUpdate);
      }
      this.debouncedUpdateFn();
    }
    debounce(fn) {
      var timeout;
      return function() {
        var context = this;
        var args = arguments;
        if (timeout) {
          window.cancelAnimationFrame(timeout);
        }
        timeout = window.requestAnimationFrame(function() {
          fn.apply(context, args);
        });
      };
    }
    paletteActions(e) {
      if (e.code === "ArrowDown" && this.paletteShown()) {
        e.preventDefault();
        this.moveDown();
        return;
      }
      if (e.code === "ArrowUp" && this.paletteShown()) {
        e.preventDefault();
        this.moveUp();
        return;
      }
      if (e.code === "Enter" && this.paletteShown()) {
        this.doAction(this.metaPressed(e));
        return;
      }
      this.paletteSearchAndUpdate();
    }
    showPalette() {
      this.paletteInputElement.value = "";
      this.paletteElement?.classList.add("active");
      this.paletteInputElement?.focus();
    }
    hidePalette() {
      this.navigating = false;
      this.paletteElement?.classList.remove("active");
      if (this.isSubMenuOpen()) {
        this.closeSubMenu();
      }
    }
    paletteShown() {
      return this.paletteElement?.classList.contains("active");
    }
    checkForPaletteItemClick(e) {
      if (e.target.tagName === "A") {
        e.preventDefault();
        if (this.isSubMenuOpen()) {
          this.selectedSubItem = e.target.closest("li");
        } else {
          this.selectedItem = e.target.closest("li");
        }
        this.setSelectedElement();
        this.doAction(this.metaPressed(e));
      }
    }
    checkForClickToClose(e) {
      if (e.target.id === this.paletteElement.id) {
        this.hidePalette();
      }
    }
    setSelectedElement() {
      if (this.isSubMenuOpen()) {
        this.paletteItemsElement?.querySelectorAll(".ta-submenu.active li.selected")?.forEach((e) => e.classList.remove("selected"));
        this.selectedSubItem.classList.add("selected");
      } else {
        this.paletteItemsElement?.querySelectorAll("li.selected")?.forEach((e) => e.classList.remove("selected"));
        if (this.selectedItem) {
          this.selectedItem.classList.add("selected");
          this.scrollList();
        }
      }
    }
    scrollList() {
      if (this.selectedItem.offsetTop < this.paletteItemsElement.scrollTop) {
        this.paletteItemsElement.scrollTop = this.selectedItem.offsetTop;
      }
      if (this.selectedItem.offsetTop + this.selectedItem.offsetHeight > this.paletteItemsElement.offsetHeight + this.paletteItemsElement.scrollTop) {
        this.paletteItemsElement.scrollTop = this.selectedItem.offsetTop + this.selectedItem.offsetHeight - this.paletteItemsElement.offsetHeight;
      }
    }
    setHoveredItem(element) {
      if (element.tagName === "LI") {
        this.navigating = true;
        if (this.isSubMenuOpen()) {
          this.selectedSubItem = element;
        } else {
          this.selectedItem = element;
        }
        this.setSelectedElement();
      }
    }
    moveDown() {
      if (this.isSubMenuOpen()) {
        const nextItem = this.selectedSubItem.nextElementSibling;
        this.navigating = true;
        if (nextItem) {
          this.selectedSubItem = nextItem;
          this.setSelectedElement();
        }
      } else {
        const nextItem = this.selectedItem.nextElementSibling;
        this.navigating = true;
        if (nextItem) {
          this.selectedItem = nextItem;
          this.setSelectedElement();
        }
      }
    }
    moveUp() {
      if (this.isSubMenuOpen()) {
        const prevItem = this.selectedSubItem.previousElementSibling;
        this.navigating = true;
        if (prevItem) {
          this.selectedSubItem = prevItem;
          this.setSelectedElement();
        }
      } else {
        const prevItem = this.selectedItem.previousElementSibling;
        this.navigating = true;
        if (prevItem) {
          this.selectedItem = prevItem;
          this.setSelectedElement();
        }
      }
    }
    isSubMenuOpen() {
      return this.openedSubMenu !== null;
    }
    openSubMenu(subMenuElement) {
      const subMenuHeight = subMenuElement.offsetHeight;
      this.paletteItemsElement.style.minHeight = subMenuHeight + "px";
      subMenuElement.classList.add("active");
      this.selectedSubItem = subMenuElement.querySelector("li");
      this.openedSubMenu = subMenuElement;
      this.setSelectedElement();
    }
    closeSubMenu(subMenuElement = null) {
      if (subMenuElement === null) {
        subMenuElement = document.querySelector(".ta-submenu.active");
      }
      subMenuElement.classList.remove("active");
      this.selectedSubItem.classList.remove("active");
      this.paletteItemsElement.style.minHeight = "auto";
      this.selectedSubItem = null;
      this.openedSubMenu = null;
    }
    doAction(metaPressed = false) {
      if (this.isSubMenuOpen()) {
        this.actOnItem(this.selectedSubItem, metaPressed);
        return;
      }
      if (this.selectedItem.classList.contains("ta-has-child-menu")) {
        const subMenu = this.selectedItem.querySelector(".ta-submenu");
        this.openSubMenu(subMenu);
        return;
      }
      this.actOnItem(this.selectedItem, metaPressed);
    }
    actOnItem(item, metaPressed) {
      this.hidePalette();
      const link = item.querySelector("a");
      const url = link.href;
      if (link.dataset.action === "clipboard") {
        navigator.clipboard.writeText(url);
        return;
      }
      if (metaPressed) {
        window.open(url, "_blank");
      } else {
        window.location = url;
      }
    }
    selectedItemDisplayed() {
      return Array.from(this.paletteItemsElement.childNodes).includes(this.selectedItem);
    }
    async paletteSearchAndUpdate() {
      await this.paletteSearch();
      this.updatePaletteItems();
    }
    async paletteSearch() {
      if (globalThis.contentApi.active && this.paletteInputElement.value.length > 2) {
        this.paletteInnerElement.classList.add("loading");
        const response = await globalThis.contentApi.get("search", {search: this.paletteInputElement.value, per_page: 100});
        this.contentItems = await response.json();
        this.paletteInnerElement.classList.remove("loading");
      } else {
        this.contentItems = [];
      }
      this.paletteItems = this.buildPaletteItems();
      if (this.paletteInputElement.value !== "") {
        this.paletteFuse = new import_fuse_6_4_6.default(this.paletteItems, this.paletteFuseOptions);
        this.paletteItems = this.paletteFuse.search(this.paletteInputElement.value).map((i) => i.item);
      }
    }
    updatePaletteItems() {
      const newItems = document.createElement("ul");
      newItems.id = "ta-command-palette-items";
      this.paletteItems.forEach((i) => {
        newItems.appendChild(i);
      });
      this.paletteItemsElement.replaceChildren(...newItems.children);
      if (!this.navigating || !this.selectedItemDisplayed()) {
        this.selectedItem = this.paletteItems[0];
      }
      this.setSelectedElement();
    }
  };
  var class_turbo_admin_palette_default = TurboAdminPalette;

  // src/class-turbo-admin-wp-block-editor-fullscreen-kill.js
  var TurboAdminWpBlockEditorFullscreenKill = class {
    constructor() {
      setTimeout(() => {
        document.body.classList.remove("is-fullscreen-mode");
        document.body.classList.add("turbo-admin-killed-fullscreen");
        const newStyles = document.createElement("style");
        newStyles.innerHTML = "body.turbo-admin-killed-fullscreen .edit-post-fullscreen-mode-close { display: none; }";
        document.body.appendChild(newStyles);
      }, 400);
    }
  };
  var class_turbo_admin_wp_block_editor_fullscreen_kill_default = TurboAdminWpBlockEditorFullscreenKill;

  // src/class-turbo-admin-wp-block-editor-welcome-guide-kill.js
  var TurboAdminWpBlockEditorWelcomeGuideKill = class {
    constructor() {
      setTimeout(() => {
        const welcomeGuide = document.querySelector(".edit-post-welcome-guide");
        if (welcomeGuide) {
          const closeButton = welcomeGuide.querySelector(".components-modal__header button");
          if (closeButton) {
            closeButton.click();
          }
        }
      }, 400);
    }
  };
  var class_turbo_admin_wp_block_editor_welcome_guide_kill_default = TurboAdminWpBlockEditorWelcomeGuideKill;

  // src/class-turbo-admin.js
  var TurboAdmin = class {
    constructor(options) {
      if (document.getElementById("ta-command-palette-container")) {
        console.log("TurboAdmin already initialised - I won't make a second copy!");
        return;
      }
      this.options = options;
      this.wp = globalThis.taWp;
      this.menu = [];
      if (!this.wp.isBackend) {
        if (!this.wp.siteChanged) {
          const savedMenu = window.localStorage.getItem("ta-palette-data");
          if (savedMenu !== null) {
            if (document.body.classList.contains("logged-in")) {
              this.menu = JSON.parse(savedMenu);
            }
          }
        }
      } else {
        this.menu = this.getMenu();
      }
      this.addAdditionalMenuItems();
      this.menu = this.menu.concat(this.options.extraItemsRaw ?? []);
      this.menu.sort((a, b) => (a.parentTitle + a.title).localeCompare(b.parentTitle + b.title));
      const itemsToSave = this.menu.filter((item) => !item.noCache);
      window.localStorage.setItem("ta-palette-data", JSON.stringify(itemsToSave));
      this.addPalette();
      this.turboAdminPalette = new class_turbo_admin_palette_default(this.menu, this.options);
      if (this.options["block-editor-fullscreen-disable"] === true) {
        this.turboAdminFullscreenKill = new class_turbo_admin_wp_block_editor_fullscreen_kill_default();
      }
      if (this.options["block-editor-welcome-screen-kill"] === true) {
        this.turboAdminWelcomeKill = new class_turbo_admin_wp_block_editor_welcome_guide_kill_default();
      }
      if (globalThis.contentApi.userLoggedIn()) {
      }
    }
    getMenu() {
      const items = [];
      const menuTop = document.getElementById("adminmenu");
      if (menuTop) {
        const topDOMItems = menuTop.querySelectorAll("li.menu-top");
        topDOMItems.forEach((el) => {
          const a = el.querySelector("a.menu-top");
          const title = a.querySelector(".wp-menu-name").innerHTML;
          const action = a.href;
          const parentTitle = "";
          const item = new class_turbo_admin_menu_item_default(title, action, parentTitle);
          items.push(item);
          const subMenu = el.querySelector(".wp-submenu");
          if (!subMenu) {
            return;
          }
          const subItems = subMenu.querySelectorAll("li a");
          if (!subItems) {
            return;
          }
          subItems.forEach((subEl) => {
            const parentTitle2 = title;
            const childTitle = subEl.innerHTML;
            const childAction = subEl.href;
            const item2 = new class_turbo_admin_menu_item_default(childTitle, childAction, parentTitle2);
            items.push(item2);
          });
        });
      }
      return items;
    }
    addAdditionalMenuItems() {
      let extraItems = this.options.extraItems ?? [];
      extraItems = extraItems.concat([
        {
          detectType: "dom",
          detectSelector: "body.wp-admin #wp-admin-bar-view-site a",
          itemTitleFunction: () => "View/visit site",
          itemUrlFunction: (element) => element.href
        },
        {
          detectType: "dom",
          detectSelector: "#wp-admin-bar-dashboard a",
          itemTitleFunction: (element) => element.textContent,
          itemUrlFunction: (element) => element.href
        },
        {
          detectType: "dom",
          detectSelector: "#wpadminbar",
          itemTitleFunction: () => "Logout",
          itemUrlFunction: () => document.getElementById("wp-admin-bar-logout")?.querySelector("a")?.href
        },
        {
          detectType: "dom",
          detectSelector: "#wp-admin-bar-edit a",
          itemTitleFunction: (item) => item.textContent,
          itemUrlFunction: (item) => item.href,
          noCache: true
        },
        {
          detectType: "dom",
          detectSelector: "#wp-admin-bar-view a",
          itemTitleFunction: (item) => item.textContent,
          itemUrlFunction: (item) => item.href,
          noCache: true
        },
        {
          detectType: "dom",
          detectSelector: "#wp-admin-bar-new-content .ab-submenu a",
          itemTitleFunction: (item) => "New " + item.textContent,
          itemUrlFunction: (item) => item.href
        },
        {
          detectType: "dom",
          detectSelector: "#wp-admin-bar-customize a",
          itemTitleFunction: (item) => item.textContent,
          itemUrlFunction: (item) => item.href
        },
        {
          detectType: "dom",
          detectSelectorNone: "#wpadminbar, #loginform",
          itemTitleFunction: () => "Log in",
          itemUrlFunction: () => {
            if (globalThis.taWp.home) {
              return globalThis.taWp.siteUrl;
            }
            return "javascript:alert('Sorry, could not detect login URL.')";
          }
        },
        {
          detectType: "dom",
          detectSelector: "#backtoblog a",
          itemTitleFunction: () => "View/visit site",
          itemUrlFunction: (element) => element.href
        },
        {
          detectType: "dom",
          detectSelector: "#wp-admin-bar-my-sites #wp-admin-bar-network-admin > a",
          itemTitleFunction: () => "Network Admin",
          itemUrlFunction: (element) => element.href
        },
        {
          detectType: "dom",
          detectSelector: "#wp-admin-bar-my-sites #wp-admin-bar-network-admin .ab-submenu a",
          itemTitleFunction: (element) => "Network Admin: " + element.textContent,
          itemUrlFunction: (element) => element.href
        },
        {
          detectType: "dom",
          detectSelector: "#wp-admin-bar-my-sites #wp-admin-bar-my-sites-list .ab-submenu a",
          itemTitleFunction: (element) => "Sites: " + element.closest(".menupop").querySelector("a").innerText + " - " + element.innerText,
          itemUrlFunction: (element) => element.href
        }
      ]);
      extraItems.forEach((item) => {
        let detected = false;
        let elements = null;
        if (item.detectType === "url") {
          detected = Boolean(window.location.href.includes(item.detectPattern));
        } else if (item.detectType === "dom") {
          if (item.detectSelector) {
            elements = document.querySelectorAll(item.detectSelector);
            detected = Boolean(elements);
          } else if (item.detectSelectorNone) {
            elements = document.querySelectorAll(item.detectSelectorNone);
            detected = elements.length === 0;
            elements = document.querySelectorAll("body");
          }
        }
        if (!detected) {
          return;
        }
        elements.forEach((element) => {
          const newItem = new class_turbo_admin_menu_item_default(item.itemTitleFunction(element), item.itemUrlFunction(element), "", item?.noCache);
          if (this.menu.some((menuItem) => {
            return newItem.sameAs(menuItem);
          })) {
            return;
          }
          this.menu.push(newItem);
        });
      });
    }
    addPalette() {
      const container = document.createElement("div");
      container.id = "ta-command-palette-container";
      const palette = document.createElement("div");
      palette.id = "ta-command-palette";
      const input = document.createElement("input");
      input.id = "ta-command-palette-input";
      input.name = "ta-command-palette-input";
      input.type = "text";
      input.setAttribute("autocomplete", "off");
      const list = document.createElement("ul");
      list.id = "ta-command-palette-items";
      container.appendChild(palette);
      palette.appendChild(input);
      palette.appendChild(list);
      document.querySelector(this.options.appendToElement ?? "body").appendChild(container);
    }
  };
  var class_turbo_admin_default = TurboAdmin;

  // src/class-wp.js
  var Wp = class {
    constructor() {
      this.siteUrl = "";
      this.home = "";
      this.loginUrl = "";
      this.apiLinkUrl = "";
      this.getUrls();
      this.previousUrl = window.localStorage.getItem("ta-palette-data-site");
      this.siteChanged = this.home !== this.previousUrl;
      this.isBackend = this.isBackend();
      window.localStorage.setItem("ta-palette-data-site", this.home);
    }
    isBackend() {
      return document.body.classList.contains("wp-admin");
    }
    getUrls() {
      const apiLink = document.querySelector('link[rel="https://api.w.org/"]');
      if (apiLink) {
        this.apiLinkUrl = apiLink.href;
      }
      if (this.isBackend()) {
        this.siteUrl = window.location.href.match(/(^.*wp-admin)/)[1];
        this.home = document.getElementById("wp-admin-bar-site-name").querySelector("a").href;
      } else {
        if (document.getElementById("wpadminbar")) {
          this.siteUrl = document.getElementById("wp-admin-bar-dashboard").querySelector("a").href;
          if (this.apiLinkUrl) {
            if (this.apiLinkUrl.includes("/wp-json")) {
              this.home = this.apiLinkUrl.replace("wp-json/", "");
            }
            if (this.apiLinkUrl.includes("index.php?rest_route")) {
              this.home = this.apiLinkUrl.replace(/index.php\?rest_route.*/, "");
            }
          } else {
            this.home = this.siteUrl.replace(/wp-admin\/?/, "");
          }
        } else {
          if (this.apiLinkUrl) {
            if (this.apiLinkUrl.includes("/wp-json")) {
              this.home = this.apiLinkUrl.replace("wp-json/", "");
            }
            if (this.apiLinkUrl.includes("index.php?rest_route")) {
              this.home = this.apiLinkUrl.replace(/index.php\?rest_route.*/, "");
            }
            this.siteUrl = this.home + "wp-admin/";
          }
        }
      }
      this.siteUrl = this.siteUrl.replace(/(.+)\/$/, "$1");
      this.home = this.home.replace(/(.+)\/$/, "$1");
    }
  };
  var class_wp_default = Wp;

  // src/main.js
  var taStorageKey = "turbo-admin-settings";
  async function taInit(settings) {
    globalThis.turboAdmin = null;
    if (typeof settings[taStorageKey] === "undefined") {
      console.log("Weird. Turbo Admin could not find any settings");
      return;
    }
    document.addEventListener("DOMContentLoaded", (e) => {
      turboAdmin = new class_turbo_admin_default(globalThis.turboAdminOptions);
    });
    globalThis.turboAdminOptions = settings[taStorageKey];
    globalThis.taWp = new class_wp_default();
    globalThis.contentApi = new class_content_api_default();
    await globalThis.contentApi.discoverApiRoot();
    globalThis.turboAdmin = new class_turbo_admin_default(globalThis.turboAdminOptions);
  }
  document.addEventListener("DOMContentLoaded", async (e) => {
    globalThis.turboAdminOptions = {};
    globalThis.turboAdminOptions[taStorageKey] = {
      shortcutKeys: globalThis.wpTurboAdmin.keys,
      "block-editor-fullscreen-disable": false,
      "block-editor-welcome-screen-kill": false
    };
    await taInit(globalThis.turboAdminOptions);
  });
})();
//# sourceMappingURL=main.min.js.map
